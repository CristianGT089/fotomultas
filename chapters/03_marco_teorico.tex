\section{\large Marco Teórico}
El marco conceptual y tecnologico que sustenta la propuesta del prototipo, presentan las teorías y modelos clave que justifican la selección de Blockchain e IPFS como componentes centrales, evidencian los principios inherentes de integridad, transparencia, resiliencia y auditabilidad en la gestión de evidencia digital crítica como los fotocomparendos.
\subsection{Teoría de Sistemas Distribuidos y Redes Descentralizadas} 

Los sistemas distribuidos representan un paradigma computacional donde múltiples entidades autónomas, denominadas nodos, colaboran a través de una red para alcanzar un objetivo común, compartiendo tanto la carga computacional como el almacenamiento de datos \parencite{vanSteen2017}.
Un subconjunto particularmente relevante son las redes descentralizadas, caracterizadas por la ausencia de una autoridad central coordinadora o un punto único de control. Estos sistemas se fundamentan en principios como la distribución de recursos, la comunicación inter-nodo y mecanismos de coordinación que prescinden de intermediarios centrales \parencite{coulouris2011}.
La relevancia de esta teoría para el presente proyecto es primordial, ya que tanto la tecnología Blockchain \parencite{nakamoto2008bitcoin} como el InterPlanetary File System (IPFS) \parencite{benet2014ipfs} son implementaciones nativas de sistemas distribuidos y descentralizados.
Su adopción conjunta proporciona una base arquitectónica robusta que inherentemente promueve la resiliencia, al eliminar puntos únicos de fallo (Single Points of Failure - SPOF); la alta disponibilidad, al permitir el acceso a datos y servicios desde múltiples nodos; y una significativa resistencia a la censura, dado que ninguna entidad individual posee control absoluto sobre la red o los datos almacenados \parencite{antonopoulos2023mastering} 

La elección de IPFS sobre alternativas de almacenamiento centralizado como Amazon Web Services S3 (AWS S3) es una decisión estratégica directamente derivada de estos principios y crucial para la integridad del sistema propuesto.
Mientras que en un sistema como S3, el propietario de la cuenta (una entidad centralizada respecto a ese dato) conserva la capacidad técnica de modificar o eliminar unilateralmente los archivos —en este caso, las imágenes probatorias de los comparendos— incluso después de que su referencia haya sido registrada \parencite{vogels2008eventually}, IPFS opera bajo un paradigma radicalmente diferente: el direccionamiento por contenido (Content Addressing) \parencite{benet2014ipfs}. En IPFS, la identidad única de un archivo, su Content Identifier (CID), es un hash criptográfico derivado directamente de su contenido.
Esto establece un vínculo intrínseco e inmutable: si el contenido del archivo cambia, incluso mínimamente, su CID también cambiará. Al almacenar este CID inmutable dentro de una transacción en la Blockchain (que a su vez es un registro distribuido e inmutable, como describe \parencite{nakamoto2008bitcoin}), se crea un enlace criptográfico inalterable entre el registro oficial del comparendo y la evidencia visual original.
Cualquier intento posterior de manipulación de la imagen almacenada en IPFS resultaría en un CID diferente, rompiendo explícitamente la cadena de custodia digital y haciendo que la alteración sea detectable de forma inmediata y algorítmica. Por lo tanto, la combinación de Blockchain e IPFS no solo sigue los principios de descentralización \parencite{vanSteen2017}, sino que refuerza activamente los objetivos de garantizar la inmutabilidad verificable y la transparencia del sistema, mitigando de manera efectiva los riesgos de corrupción asociados a la manipulación o eliminación de pruebas críticas gestionadas centralizadamente. 

El enfoque práctico de estos principios en el prototipo se materializa mediante la implementación de mecanismos específicos de sistemas distribuidos. La tolerancia a fallos se logra a través de la replicación inherente de datos en la red IPFS \parencite{benet2014ipfs} y mediante los protocolos de consenso de la Blockchain \parencite{nakamoto2008bitcoin,antonopoulos2023mastering}, que permiten que la red continúe operando y validando transacciones incluso si una fracción de los nodos falla o se desconecta. Se adoptan modelos de consistencia apropiados para cada capa: la Blockchain generalmente busca una consistencia fuerte para el registro transaccional asegurada por su mecanismo de consenso, mientras que la propagación y disponibilidad de los archivos en la vasta red IPFS opera bajo un modelo de consistencia eventual, un concepto bien establecido en sistemas distribuidos a gran escala \parencite{vogels2008eventually, vanSteen2017}, garantizando que, con el tiempo, el archivo estará disponible ampliamente en la red. La comunicación subyacente se basa enteramente en protocolos Peer-to-Peer (P2P), tanto para la difusión de transacciones y bloques en la red Blockchain \parencite{nakamoto2008bitcoin} como para el descubrimiento de nodos y la transferencia de bloques de datos en IPFS \parencite{benet2014ipfs}, asegurando la operatividad autónoma, la eficiencia en la distribución de datos y la resiliencia general del sistema sin depender de infraestructuras de comunicación centralizadas \parencite{coulouris2011}. 

\subsection{Modelos de Confianza Descentralizada (Trust Models)} 
Los modelos de confianza tradicionales en sistemas de información suelen depender de intermediarios centralizados o autoridades certificadoras para validar transacciones y garantizar la fiabilidad de los registros. La teoría de los modelos de confianza descentralizada analiza cómo se puede establecer y mantener la confianza en entornos distribuidos donde tales autoridades centrales están ausentes \parencite{swan2015blockchain}. La relevancia de estos modelos es fundamental para justificar el uso de la tecnología Blockchain en la gestión de fotocomparendos, ya que su propósito es precisamente reemplazar la necesidad de depositar confianza exclusiva en una única entidad para la custodia, validación e integridad de los registros. Blockchain habilita un cambio de paradigma: en lugar de confiar en un actor central, la confianza se distribuye y se deposita en la robustez del protocolo criptográfico subyacente \parencite{nakamoto2008bitcoin}, en la transparencia (controlada o pública) de las reglas del sistema codificadas (a menudo en Smart Contracts) y en el consenso mayoritario de los participantes de la red \parencite{antonopoulos2023mastering}. Este enfoque de confianza distribuida incrementa significativamente la transparencia, ya que las reglas y (potencialmente) las transacciones pueden ser auditadas por las partes autorizadas; mejora la auditabilidad, al proveer un registro histórico inmutable y verificable \parencite{swan2015blockchain}; y reduce drásticamente los puntos únicos de fallo o vectores de corrupción asociados a la dependencia de intermediarios centralizados, quienes podrían ser comprometidos, cometer errores o actuar de manera malintencionada. 

\paragraph{Redes P2P (Peer-to-Peer)} 
 Una red P2P (del inglés Peer-to-Peer, o red entre pares) es un modelo de arquitectura de red en el que los participantes, denominados "pares" o "nodos", se conectan y comparten recursos directamente entre sí, sin necesidad de un servidor central que actúe como intermediario. A diferencia del modelo cliente-servidor tradicional, en una red P2P cada nodo puede actuar simultáneamente como cliente y como servidor. 
En el contexto de este proyecto, el paradigma P2P es fundamental, ya que es la base sobre la que se construyen tanto la tecnología Blockchain como el sistema IPFS. Este modelo permite la descentralización inherente al sistema, eliminando los puntos únicos de fallo y aumentando la resiliencia y la resistencia a la censura. La comunicación directa entre nodos es lo que posibilita que el ledger se mantenga sincronizado y que los archivos en IPFS puedan ser recuperados desde múltiples fuentes, garantizando la disponibilidad y la integridad de la información sin depender de una autoridad central. 


\subsection{Teoría de la Inmutabilidad y Transparencia en Registros Digitales} 
Esta teoría explora los principios y mecanismos para crear sistemas de registro digital que sean altamente resistentes a la modificación post-facto (inmutabilidad) y que permitan la verificación por partes autorizadas (transparencia). Estos dos atributos son beneficios centrales que la tecnología Blockchain aporta \parencite{swan2015blockchain,antonopoulos2023mastering}. La inmutabilidad es fundamental para garantizar la fiabilidad histórica del registro. La transparencia permite la auditoría y verificación del proceso. El enfoque para lograr la inmutabilidad en Blockchain reside en su estructura de datos encadenada (cada bloque contiene el hash del anterior) y en los mecanismos de consenso distribuido \parencite{nakamoto2008bitcoin}, haciendo que la modificación de un bloque pasado sea computacionalmente prohibitiva. La transparencia se habilita por la naturaleza replicada del ledger, permitiendo que diferentes actores puedan consultar y verificar la información de forma independiente, según los permisos definidos \parencite{antonopoulos2023mastering}. 

\subsection{ Modelos Arquitectónicos de Blockchain} 
La tecnología Blockchain no representa una arquitectura monolítica, sino un espectro de modelos de diseño que varían fundamentalmente según el modelo de permisos y la estructura de datos. La teoría arquitectónica distingue principalmente entre: 

\textbf{Blockchains Públicas (Permissionless):} Sistemas abiertos donde cualquier nodo puede unirse, leer, escribir (si paga las tasas) y participar en el consenso (ej. Bitcoin, Ethereum). Priorizan la descentralización radical y la resistencia a la censura, a menudo a costa de la escalabilidad y la privacidad transaccional \parencite{nakamoto2008bitcoin}. 

\textbf{Blockchains Privadas:} Controladas por una única entidad que gestiona todos los permisos. Ofrecen alta eficiencia y confidencialidad, pero son centralizadas y la confianza reside en esa única entidad. 

\textbf{Blockchains de Consorcio/Permisionadas (Permissioned):} Operadas por un grupo selecto y conocido de participantes autorizados. Permiten un control granular sobre quién puede leer, escribir y validar, habilitando modelos de confianza distribuida entre entidades pre-aprobadas y mecanismos de consenso más eficientes (ej. PBFT, Raft). Ofrecen un equilibrio entre descentralización (limitada al consorcio), rendimiento y confidencialidad \parencite{vukolic2015quest,cachin2018architecture}.

Otro aspecto arquitectónico clave es el manejo de datos: los ledgers están optimizados para registrar transacciones, no para almacenar grandes volúmenes de datos (blobs), lo que conduce a modelos arquitectónicos que separan el almacenamiento de datos (off-chain) del registro transaccional (on-chain) \parencite{xu2019taxonomy}. 

La aplicación práctica de estos modelos arquitectónicos en el prototipo se materializa en: 

\textbf{Implementación Permisionada: }Utilizar Hyperledger Fabric para definir una red donde solo entidades autorizadas (ej., simulando la Secretaría de Movilidad) pueden operar nodos, registrar transacciones (nuevos comparendos) y potencialmente consultar el historial. Se aplicarán políticas de acceso basadas en identidades digitales gestionadas por la infraestructura de Fabric (Membership Service Provider - MSP). 

\textbf{Patrón Off-Chain con IPFS: } El flujo de trabajo implementará el patrón de almacenamiento off-chain: (1) La imagen del comparendo se carga a un nodo IPFS. (2) Se obtiene su Content Identifier (CID) único. (3) Se crea una transacción en Hyperledger Fabric que incluye este CID junto con los metadatos esenciales (fecha, hora, lugar, placa, tipo de infracción). (4) Esta transacción se valida y registra inmutablemente en el ledger de Fabric. El proceso de verificación consultará la transacción en Fabric, obtendrá el CID y lo usará para recuperar la imagen original desde IPFS. 

\textbf{Consenso Eficiente:} Aprovechar los mecanismos de consenso de Fabric (ej., Raft), que son más eficientes que PoW/PoS al operar en un entorno de confianza parcial entre nodos conocidos, adecuado para el rendimiento requerido en un sistema de gestión de registros. 

\textbf{Gestión de Trade-offs:} Reconocer y gestionar los trade-offs inherentes a la arquitectura elegida: la descentralización se limita al consorcio; la persistencia de datos en IPFS requiere una estrategia activa de "pinning" por parte de los nodos autorizados para garantizar la disponibilidad a largo plazo de la evidencia. 
 
\paragraph{Blockchain / Tecnología de Ledger Distribuido (DLT)}
Una blockchain es un tipo específico de Tecnología de Ledger Distribuido (Distributed Ledger Technology, DLT), un sistema de registro digital caracterizado por ser distribuido, sincronizado y asegurado criptográficamente entre múltiples participantes \parencite{narayanan2016bitcoin}. La estructura fundamental se compone de bloques de datos que contienen transacciones validadas y un hash criptográfico que lo vincula al bloque anterior, formando una cadena cronológica. La red está mantenida por nodos que almacenan copias del ledger y ejecutan un protocolo de consenso (ej., Proof-of-Work descrito por \parencite{nakamoto2008bitcoin}, o Proof-of-Stake por \parencite{king2012ppcoin}) para validar y agregar nuevos bloques. Las características clave resultantes son la descentralización, la inmutabilidad (resistencia a la alteración de datos pasados), la transparencia configurable y la seguridad criptográfica \parencite{swan2015blockchain}. DLT es el término general, mientras que Blockchain se refiere específicamente a la estructura de bloques encadenados \parencite{ukgov2016dlt}.

\paragraph{Transacción (en Blockchain)} 
En el contexto de Blockchain, una transacción es una operación firmada digitalmente que se propaga a la red para su validación e inclusión en un bloque \parencite{antonopoulos2023mastering}. Una vez confirmada, modifica el estado del ledger de forma permanente. Para este proyecto, cada transacción crucial encapsula el hash CID de la imagen del comparendo obtenida de IPFS y los metadatos asociados (ej., fecha, lugar, placa, infracción). Funciona como el registro inmutable que vincula la prueba visual con los datos descriptivos del evento. 

\paragraph{Smart Contract (Contrato Inteligente)} 
Un Smart Contract es un programa autoejecutable almacenado en una Blockchain, cuyo código define e impone automáticamente los términos de un acuerdo o proceso cuando se cumplen condiciones predefinidas \parencite{szabo1997smart, wood2014ethereum}. Su aplicación potencial en este proyecto podría extenderse a la gestión automatizada del ciclo de vida del comparendo (actualización de estado de pago, aplicación de plazos o sanciones) o a la implementación de reglas de acceso y auditoría más complejas \parencite{buterin2014next}. 

\subsection{Modelos de Almacenamiento Direccionable por Contenido (Content Addressing)} 
El direccionamiento por contenido representa un paradigma fundamental para la localización y recuperación de datos en sistemas distribuidos \parencite{voigt2017gdpr}, contrastando con el modelo tradicional de direccionamiento por ubicación (Location Addressing) típico de la web \parencite{fielding2000architectural}. En lugar de referenciar un dato por dónde está almacenado, utiliza una dirección derivada directamente del contenido, típicamente su hash criptográfico. IPFS \parencite{benet2014ipfs} es una implementación prominente de este modelo. Su relevancia es crítica porque proporciona una solución intrínsecamente verificable y persistente para almacenar la evidencia. El enfoque práctico consiste en que, al cargar la imagen en IPFS, se calcula su hash criptográfico único (CID). La ventaja sobre el direccionamiento por ubicación radica en la eliminación de la fragilidad de los enlaces ('link rot') y la dependencia de servidores específicos \parencite{voigt2017gdpr}. El direccionamiento por contenido garantiza por diseño que un CID específico siempre corresponderá a una única e inmutable versión del contenido \parencite{benet2014ipfs}, asegurando que el hash almacenado en la Blockchain actúa como un puntero permanente y verificable a la evidencia original. 

\paragraph{IPFS (InterPlanetary File System)} 
IPFS es un protocolo y red P2P diseñado para el almacenamiento y la compartición de archivos distribuida y direccionable por contenido \parencite{benet2014ipfs}. Su funcionamiento básico implica dividir archivos en bloques, calcular el hash de cada bloque y construir una estructura de datos Merkle DAG cuyo hash raíz es el CID del archivo. Para almacenar, un nodo anuncia los hashes de los bloques que posee. Para recuperar, un nodo solicita el archivo por su CID, y la red IPFS utiliza mecanismos como DHT \parencite{maymounkov2002kademlia} para localizar y obtener los bloques de los nodos pares que los poseen \parencite{benet2014ipfs}. 

\paragraph{Hash Criptográfico (y Hash Único/CID)} 
Un hash criptográfico es una salida de longitud fija generada por una función hash a partir de una entrada de datos, actuando como su huella digital única \parencite{menezes1996handbook}. Debe ser resistente a colisiones y unidireccional. Su aplicación en el proyecto es doble: En IPFS, como Content Identifier (CID), identifica unívocamente la imagen del comparendo, asegura su integridad y permite su recuperación \parencite{benet2014ipfs}. En Blockchain, se utiliza para enlazar bloques (asegurando la integridad de la cadena) y para identificar transacciones \parencite{nakamoto2008bitcoin}. 


\subsection{Teoría Criptográfica Aplicada} 
La criptografía, la ciencia de la comunicación segura en presencia de adversarios \parencite{katz2020introduction}, proporciona los fundamentos matemáticos esenciales para la seguridad, integridad y autenticidad en todo el ecosistema digital del prototipo. Su relevancia es transversal, ya que impregna tanto la capa de registro (Blockchain) como la capa de almacenamiento (IPFS) y la interacción de los usuarios. El enfoque aplicado se centra en dos pilares criptográficos principales. Primero, las Funciones Hash Criptográficas son algoritmos determinísticos que transforman una entrada de datos de cualquier tamaño en una salida de tamaño fijo (el hash), con propiedades cruciales como la unidireccionalidad, la resistencia a colisiones y el efecto avalancha \parencite{schneier2007applied,katz2020introduction}. En este proyecto, los hashes juegan un rol vital: en IPFS, generan el Content Identifier (CID) único para cada imagen \parencite{benet2014ipfs}, garantizando su integridad y sirviendo como su dirección; en la Blockchain, aseguran la integridad de los bloques al incluir el hash del bloque anterior y se utilizan para generar identificadores únicos para las transacciones \parencite{nakamoto2008bitcoin}. Segundo, la Criptografía Asimétrica, basada en pares de claves pública y privada, habilita mecanismos de Firma Digital \parencite{diffie2022new,rivest1978method}. Cuando un usuario autorizado registra un comparendo, utiliza su clave privada para firmar digitalmente la transacción. Cualquier participante puede usar la clave pública correspondiente para verificar la firma, garantizando así la autenticidad y el no repudio \parencite{katz2020introduction}. 

\paragraph{Metadatos}  
Los metadatos son «datos acerca de datos» \parencite{gilliland2008setting}. En este proyecto, se refieren a la información estructurada que describe el contexto del fotocomparendo (fecha, hora, lugar, tipo de infracción, placa, etc.). Estos metadatos se registran directamente en la transacción Blockchain, junto al CID de la imagen, proporcionando un contexto inmutable y fácilmente verificable para la evidencia visual. 


\paragraph{Proceso de Verificación Digital (en este contexto)}  
Este proceso se refiere a los pasos técnicos para confirmar la autenticidad e integridad de un fotocomparendo usando las tecnologías del prototipo. El mecanismo implica: consultar la transacción en la Blockchain mediante un identificador, extraer el CID y los metadatos registrados, usar el CID para recuperar la imagen original de IPFS, y permitir al usuario comparar la información. La fiabilidad del proceso se basa en la inmutabilidad de la Blockchain \parencite{nakamoto2008bitcoin} y el direccionamiento por contenido de IPFS \parencite{benet2014ipfs}, que conjuntamente aseguran que tanto el registro como la evidencia visual son auténticos y no han sido alterados. 