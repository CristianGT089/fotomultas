% ==================== SECCIÓN 3: RESULTADOS ====================
% PRESENTADORES: CRISTIAN (plan + inmutabilidad) → CATALINA (métricas)
\section{Validación y pruebas}

% ==================== SLIDE: PLAN DE PRUEBAS ====================
% CRISTIAN: Presenta la estrategia y la tabla de pruebas por módulo (~1.5 min)
\begin{frame}{Plan de pruebas: cobertura del prototipo}
    \textbf{Estrategia:} \highlight{80 casos de prueba} automatizados (Vitest v3.2.4) --- \highlight{Tasa de éxito: 100\%} --- \highlight{Tiempo total: 28.98s}

    \vspace{0.3em}

    \footnotesize
    \begin{table}
        \caption{Resultados del plan de pruebas por módulo}
        \centering
        \begin{tabular}{p{3.5cm} c c p{4.5cm}}
            \toprule
            \textbf{Módulo} & \textbf{Pruebas} & \textbf{Éxito} & \textbf{Cobertura} \\
            \midrule
            Utilidades (Error Handler) & 7 & 7/7 & Manejo global de errores \\
            Servicios IPFS & 8 & 8/8 & Subida, recuperación, CIDs \\
            Integración IPFS & 13 & 13/13 & Inmutabilidad, content-addressed \\
            Seguridad: Validación & 16 & 16/16 & XSS, SQL injection, path traversal \\
            Seguridad: Archivos & 10 & 10/10 & Límites 10MB, tipos válidos \\
            API REST & 26 & 26/26 & CRUD, blockchain/IPFS \\
            \midrule
            \textbf{Total} & \textbf{80} & \textbf{80/80} & \textbf{100\% cobertura funcional} \\
            \bottomrule
        \end{tabular}
    \end{table}
\end{frame}

% ==================== SLIDE: PRUEBAS DE INMUTABILIDAD ====================
% CRISTIAN: Explica los 4 casos, evidencia técnica y resultado (~1.5 min)
\begin{frame}{Pruebas de inmutabilidad}
    \footnotesize
    \begin{table}
        \caption{Resultados de pruebas de inmutabilidad}
        \centering
        \begin{tabular}{p{1cm} p{4.5cm} p{5cm}}
            \toprule
            \textbf{ID} & \textbf{Caso de prueba} & \textbf{Resultado} \\
            \midrule
            IM-001 & Modificación directa en ledger & Transacción rechazada por consenso \\
            \midrule
            IM-002 & Alteración de imagen en IPFS & CID diferente $\rightarrow$ Detección automática \\
            \midrule
            IM-003 & Verificación de trazabilidad & Historial inmutable preservado \\
            \midrule
            IM-004 & Validación de consenso & Consenso validado correctamente \\
            \bottomrule
        \end{tabular}
    \end{table}

    \vspace{0.2em}

    \footnotesize
    \textbf{Evidencia técnica:} TX Hash registro: \texttt{0xbc03e11f...42c3c069} | TX Hash actualización: \texttt{0x611b696e...d315f3e48} | CID IPFS: \texttt{QmadhsypxKm7b2P2w...sp8eKMF}

    \vspace{0.2em}

    \begin{exampleblock}{Resultado}
        En el entorno experimental, el prototipo rechazó satisfactoriamente el 100\% de los intentos de modificación no autorizada.
    \end{exampleblock}
\end{frame}

% ==================== SLIDE: MÉTRICAS DE DESEMPEÑO ====================
% CATALINA: Presenta tiempos, criterios de éxito e interfaces (~1.5 min)
\begin{frame}{Métricas de desempeño}
    \begin{columns}[T]
        \begin{column}{0.5\textwidth}
            \textbf{Tiempos de respuesta medidos:}

            \vspace{0.5em}

            \begin{itemize}
                \item Registro completo: \highlight{$<$ 3 segundos}
                \item Consulta de multa: \highlight{$<$ 1 segundo}
                \item Verificación de integridad: \highlight{$<$ 2 segundos}
            \end{itemize}

            \vspace{0.8em}

            \begin{exampleblock}{Criterios de éxito}
                $\checkmark$ Tiempo de publicación $\leq$ 3s

                $\checkmark$ Coincidencia 100\% hash

                $\checkmark$ Trazabilidad completa en entorno de prueba
            \end{exampleblock}
        \end{column}
        \begin{column}{0.5\textwidth}
            \centering
            \textbf{Interfaces desarrolladas:}

            \vspace{0.3em}

            \includegraphics[width=0.95\textwidth,height=0.25\textheight,keepaspectratio]{images/UI3.png}
            \captionof{figure}{\textit{Dashboard del agente de tránsito}}

            \vspace{0.2em}

            \includegraphics[height=0.2\textheight]{images/UI5.png}
            \captionof{figure}{\textit{Consulta y verificación ciudadana}}
        \end{column}
    \end{columns}
\end{frame}
